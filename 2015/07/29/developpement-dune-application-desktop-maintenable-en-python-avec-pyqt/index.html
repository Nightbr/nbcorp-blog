
<!DOCTYPE html>
<html lang="fr-FR">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Nbcorp Blog">
    <title>Développement d&#39;une application desktop maintenable en Python avec PyQt - Nbcorp Blog</title>
    <meta name="author" content="Titouan BENOIT">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/nbcorp-blog/atom.xml">
    
    <meta name="description" content="Bonjour à tous,
aujourd’hui je vais faire un petit tutoriel sur comment faire une application desktop en Python avec PyQt. Pour ceux qui ne connaissent pas Qt, c’est une librairie graphique qui fourni">
<meta property="og:type" content="blog">
<meta property="og:title" content="Développement d'une application desktop maintenable en Python avec PyQt">
<meta property="og:url" content="https://nightbr.github.io/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/index.html">
<meta property="og:site_name" content="Nbcorp Blog">
<meta property="og:description" content="Bonjour à tous,
aujourd’hui je vais faire un petit tutoriel sur comment faire une application desktop en Python avec PyQt. Pour ceux qui ne connaissent pas Qt, c’est une librairie graphique qui fourni">
<meta property="og:image" content="https://nightbr.github.io/nbcorp-blog/images/QtDesigner.png">
<meta property="og:image" content="https://nightbr.github.io/nbcorp-blog/images/scaffolding.png">
<meta property="og:updated_time" content="2016-12-14T10:51:44.966Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Développement d'une application desktop maintenable en Python avec PyQt">
<meta name="twitter:description" content="Bonjour à tous,
aujourd’hui je vais faire un petit tutoriel sur comment faire une application desktop en Python avec PyQt. Pour ceux qui ne connaissent pas Qt, c’est une librairie graphique qui fourni">
<meta name="twitter:image" content="https://nightbr.github.io/nbcorp-blog/images/QtDesigner.png">
<meta name="twitter:creator" content="@titouan_benoit">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/0fedc968af6402c6ab176088bb995c91?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/nbcorp-blog/assets/css/style-iqh8bfwz2d7rdoh7rjosff4ppbvbehyfzdyuzboxzbztq4aekrsjxnarnmm0.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/nbcorp-blog/ ">Nbcorp Blog</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/0fedc968af6402c6ab176088bb995c91?s=90"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/nbcorp-blog/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/0fedc968af6402c6ab176088bb995c91?s=110"/>
            </a>
            <span class="sidebar-profile-name">Titouan BENOIT</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/nbcorp-blog/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Accueil</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/nbcorp-blog/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/nbcorp-blog/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/nbcorp-blog/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archive</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">À propos</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/Nightbr" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://stackoverflow.com/users/2183369/titouanb" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                    <span class="sidebar-button-desc">Stack Overflow</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/titouan_benoit" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.linkedin.com/in/titouanbenoit" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">LinkedIn</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/nbcorp-blog/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Développement d&#39;une application desktop maintenable en Python avec PyQt
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" datetime="2015-07-29T14:11:55+02:00">
	
		    29 juil. 2015
    	
    </time>
    
        <span>dans </span>
        
    <a class="category-link" href="/nbcorp-blog/categories/Developpement/">Développement</a>


    
</div>

</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>Bonjour à tous,</p>
<p>aujourd’hui je vais faire un petit tutoriel sur comment faire une application desktop en Python avec PyQt. Pour ceux qui ne connaissent pas <a href="http://www.qt.io/" target="_blank" rel="external">Qt</a>, c’est une librairie graphique qui fournit pas mal d’outils sympas pour faire des interfaces graphiques. Vraiment puissant et sympa à utiliser, je le conseille vivement pour des projets de toutes tailles qui ont besoin d’avoir un client desktop.</p>
<a id="more"></a>
<p>Une question légitime est “Pourquoi choisir de faire une application desktop en <a href="https://www.python.org/" target="_blank" rel="external">Python</a> ??”. En effet, c’est une bonne question. Dans un premier temps je dirais que le Python est multiplateforme et donc votre application fonctionnera sur Windows, Mac OS X et Linux ayant Python. De plus, personnellement je fais des applications desktop en Python principalement pour venir communiquer en Serial avec des systèmes embarqués (Communication Serial avec une Arduino, MBED ou un micro STM32). Ces applications me permettent d’avoir une interface graphique sympa pour venir configurer une Arduino par exemple. Le langage est vraiment facile à utiliser et performant, et couplé avec <a href="https://pip.pypa.io/en/stable/" target="_blank" rel="external">pip</a> le gestionnaire de dépendances on fait des projets vraiment propres en un temps record ;).</p>
<p>Maintenant que j’ai introduit le sujet, je vous propose de mettre en place une application très simple avec Python et PyQt ainsi qu’un environnement facile à maintenir.</p>
<h2 id="1-Prerequis"><a href="#1-Prerequis" class="headerlink" title="1. Prérequis"></a>1. Prérequis</h2><p>Pour ceux qui développent sous Linux :</p>
<ul>
<li>Python 2.7.x</li>
<li>PyQt4 : <code>sudo apt-get install pyqt4-dev</code></li>
<li>PyQt4 Tools : <code>sudo apt-get install pyqt4-dev-tools</code></li>
<li>Qt-designer : <code>sudo apt-get install qt4-designer</code></li>
</ul>
<p>Pour ceux sous Windows :</p>
<ul>
<li>Python 2.7.x</li>
<li>PyQt4 : <a href="http://www.riverbankcomputing.co.uk/software/pyqt/download" target="_blank" rel="external">http://www.riverbankcomputing.co.uk/software/pyqt/download</a></li>
</ul>
<p>Pour ma part, je travaille sous Linux Mint 17.10 et pour coder le super éditeur Sublime Text 3.</p>
<h2 id="2-Qt-Designer"><a href="#2-Qt-Designer" class="headerlink" title="2. Qt Designer"></a>2. Qt Designer</h2><p>Qt Designer est l’outil qui vous permet de construire vos interfaces graphiques aussi appelé GUI (Graphical User Interface) ou simplement UI (User Interface).</p>
<p><img src="/nbcorp-blog/images/QtDesigner.png" alt="QtDesigner"></p>
<p>A partir de cet outil, vous êtes capable de créer très facilement et rapidement vos interfaces graphique. Du simple drag&amp;drop et le tour est joué ! Ensuite, Qt designer enregistre l’UI au format .ui qui est simplement un format xml spécifique à Qt.</p>
<p>Une fois notre interface réalisée, on peut à partir du fichier .ui réaliser une classe Python pour PyQt. On réalise ceci grâce à <strong>pyuic4</strong>.</p>
<pre><code>pyuic4 monfichier.ui -o monfichier.py
</code></pre><p>Et on récupère une classe Python qui correspond à notre UI et qu’on va pouvoir manipuler en Python. Il faut à présent faire un petit scaffolding pour notre projet afin de faciliter l’intégration de l’UI dans notre app.</p>
<h2 id="3-Scaffolding"><a href="#3-Scaffolding" class="headerlink" title="3. Scaffolding"></a>3. Scaffolding</h2><p>Je propose un scaffolding comme ceci : (note : en <strong>gras</strong> les dossiers en <em>italique</em> les fichiers)</p>
<ul>
<li><strong>project</strong><ul>
<li><em>appName.py</em></li>
<li><em>App.py</em></li>
<li><em>MainUI.py</em></li>
<li><em><strong>init</strong>.py</em></li>
<li><strong>UI</strong><ul>
<li><strong>myui.ui</strong></li>
<li><strong>MyUI.py</strong></li>
<li><strong>build.sh</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/nbcorp-blog/images/scaffolding.png" alt="scaffolding"></p>
<p>Pour expliquer le principe, tous ce qui est lié à mon UI est dans le dossier<strong> UI</strong> (*.ui, mes classes Python générées à partir des *.ui, ressources tel que Images, …). Mon script <em>build.sh</em> me permet de convertir mon fichier <em>myui.ui</em> en <em>MyUI.py</em>.</p>
<p><em>build.sh</em></p>
<pre><code>#!/bin/bash

pyuic4 myui.ui -o MyUI.py
#pyrcc4 ressources.qrc -o Ressources_rc.py
</code></pre><p>La magie s’opère ensuite dans le fichier MainUI.py ; en effet, je vais créer une classe MainUI qui va hériter de la classe MyUI du fichier MyUI.py</p>
<p>Grâce à ce système, si je fais des modifications sur mon UI via Qt designer, je n’ai qu’à exécuter mon script build.sh pour mettre à jour mon UI.</p>
<h2 id="4-Organisation-du-code"><a href="#4-Organisation-du-code" class="headerlink" title="4. Organisation du code"></a>4. Organisation du code</h2><p>Le fichier MainUI.py hérite de notre MyUI.py généré depuis le fichier de Qt Designer :</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                              MainUI.py                                    #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment"># Class MainUI extend from Ui_MainWindow which is generated with #</span></div><div class="line"><span class="comment"># py2uic and QtDesigner.                                                    #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment"># Création     : 29.07.2015  T. Benoit       Version 1.0                    #</span></div><div class="line"><span class="comment"># Vérifié      : @@.@@.@@@@  T. Benoit                                      #</span></div><div class="line"><span class="comment"># Modification :                                                            #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> UI.MyUI <span class="keyword">as</span> MyUI</div><div class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtCore, QtGui</div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    _fromUtf8 = QtCore.QString.fromUtf8</div><div class="line"><span class="keyword">except</span> AttributeError:</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_fromUtf8</span><span class="params">(s)</span>:</span></div><div class="line">        <span class="keyword">return</span> s</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainUI</span><span class="params">(QtGui.QMainWindow, MyUI.Ui_MainWindow)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></div><div class="line">        super(MainUI, self).__init__(parent)</div><div class="line">        self.setupUi(self)</div><div class="line"></div><div class="line">        <span class="comment"># customize UI here</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></div><div class="line">        self.show()</div></pre></td></tr></table></figure>
<p>On peut ici personnaliser notre UI avec des comportements particuliers comme lier un bouton pour ouvrir une boite de dialogue, … On met ici des fonctionnalités liées à l’UI mais pas encore des fonctionnalités liées à l’application en elle même. Les fonctionnalités liées à l’application vont se trouver dans le fichier App.py !</p>
<p><strong>App.py</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                                 App.py                                    #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment"># Class App which contains application logic                                #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment"># Création     : 29.07.2015  T. Benoit       Version 1.0                    #</span></div><div class="line"><span class="comment"># Vérifié      : @@.@@.@@@@  T. Benoit                                      #</span></div><div class="line"><span class="comment"># Modification :                                                            #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">from</span> MainUI <span class="keyword">import</span> MainUI</div><div class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtCore, QtGui</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#---------------------------------------------------------------------------#</span></div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    _fromUtf8 = QtCore.QString.fromUtf8</div><div class="line"><span class="keyword">except</span> AttributeError:</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_fromUtf8</span><span class="params">(s)</span>:</span></div><div class="line">        <span class="keyword">return</span> s</div><div class="line"></div><div class="line"><span class="comment">#---------------------------------------------------------------------------#</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span>:</span></div><div class="line"></div><div class="line">    gui = <span class="keyword">None</span></div><div class="line">    app = <span class="keyword">None</span></div><div class="line">    counter = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, guiClass, appClass)</span>:</span></div><div class="line">        self.gui = guiClass</div><div class="line">        self.app = appClass</div><div class="line">        self.counter = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">""" setup functionnality """</span></div><div class="line"></div><div class="line">        self.gui.pushButton.clicked.connect(self.action)</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">""" Main execution for App """</span></div><div class="line">        self.setup()</div><div class="line">        self.gui.main()</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">action</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">""" action when I click the push Button """</span></div><div class="line">        self.gui.textEdit.append(<span class="string">"Hello world: "</span>+str(self.counter))</div><div class="line">        self.counter = self.counter + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>On retrouve ici la base de notre application, on injecte la classe avec l’ui afin de pouvoir manipuler les objets de l’interface graphique. La méthode setup permet d’initialiser les connect qui sont des listeners d’événement pour PyQt. On y attache des fonctions callbacks qui seront exécutés si l’événement survient. Par exemple ici j’ai attaché l’événement clicked sur le bouton pushButton à la méthode action de la classe. Dans cette méthode, je remplis le textEdit avec hello world et un compteur.</p>
<p>La class App est le coeur de votre application, c’est là où vous mettez la logique de votre app.</p>
<p>Enfin, il faut le fichier de l’application qui sera à exécuter :</p>
<p><em>appName.py</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                              appName.py                                   #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment"># Main file for our Application                                             #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#                                                                           #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"><span class="comment"># Création     : 29.07.2015  T. Benoit       Version 1.0                    #</span></div><div class="line"><span class="comment"># Vérifié      : @@.@@.@@@@  T. Benoit                                      #</span></div><div class="line"><span class="comment"># Modification :                                                            #</span></div><div class="line"><span class="comment">#***************************************************************************#</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> MainUI <span class="keyword">import</span> MainUI</div><div class="line"><span class="keyword">from</span> App <span class="keyword">import</span> App</div><div class="line"><span class="keyword">from</span> PyQt4 <span class="keyword">import</span> QtCore, QtGui</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    app = QtGui.QApplication(sys.argv) <span class="comment">#create a Qt app</span></div><div class="line">    gui = MainUI() <span class="comment"># create GUI instance</span></div><div class="line">    myApp = App(gui,app)</div><div class="line">    myApp.main() <span class="comment"># init the App</span></div><div class="line">    sys.exit(app.exec_()) <span class="comment"># lauch Qt App</span></div><div class="line"></div><div class="line"><span class="comment">#---------------------------------------------------------------------------#</span></div><div class="line"><span class="comment">#                                Main                                       #</span></div><div class="line"><span class="comment">#---------------------------------------------------------------------------#</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<p>Dans un premier temps, on créé une Qt app puis on instancie notre GUI qui vient du MainUI et enfin on instancie notre classe App en lui injectant le gui et l’app Qt pour qu’elle puisse les manipuler. Le must serait d’instancier la classe MainUI dans un thread et l’App dans un autre thread car si vous avez des fonctions dans la classe App qui prennent du temps ou qui sont bloquantes, cela va freezer l’interface graphique… pas cool… Mais dans la majorité des cas, on clique sur un bouton et on fait une action simple non bloquante dans ce cas là pas besoin de séparer l’App et l’UI dans deux threads différents.</p>
<p>Et voilà, vous n’avez plus qu’à exécuter votre application : python appName.py</p>
<h2 id="5-Pour-aller-plus-loin…"><a href="#5-Pour-aller-plus-loin…" class="headerlink" title="5. Pour aller plus loin…"></a>5. Pour aller plus loin…</h2><p>Maintenant qu’on a notre application, on voudrait bien en faire un .exe sous Windows afin de livrer une app packagée. Pour cela, il existe l’utilitaire <a href="http://www.py2exe.org/" target="_blank" rel="external">py2exe</a> qui est franchement bien !</p>
<p>Il faut juste créer un fichier setup.py à la racine de notre projet avec la configuration de notre application :</p>
<p><em>setup.py</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> py2exe</div><div class="line"></div><div class="line">setup(name=<span class="string">"appName"</span>,</div><div class="line">      version=<span class="string">"1.0.0"</span>,</div><div class="line">      author=<span class="string">"Titouan Benoit"</span>,</div><div class="line">      author_email=<span class="string">"titouan.benoit@gmx.fr"</span>,</div><div class="line">      windows=[&#123;<span class="string">"script"</span>: <span class="string">"appName.py"</span>&#125;],</div><div class="line">      options=&#123;<span class="string">"py2exe"</span>: &#123;<span class="string">'bundle_files'</span>: <span class="number">1</span>, <span class="string">'compressed'</span>: <span class="keyword">True</span>,<span class="string">"includes"</span>: [<span class="string">"sip"</span>], <span class="string">"dll_excludes"</span>: [<span class="string">"MSVCP90.dll"</span>, <span class="string">"HID.DLL"</span>, <span class="string">"w9xpopen.exe"</span>]&#125;&#125;)</div></pre></td></tr></table></figure>
<p>Et ensuite exécuter :</p>
<pre><code>python setup.py py2exe
</code></pre><p>Attention, cela fonctionne uniquement sous Windows bien entendu et il vous faut Microsoft Visual C++ 2008 : <a href="http://www.microsoft.com/fr-FR/download/details.aspx?id=29" target="_blank" rel="external">http://www.microsoft.com/fr-FR/download/details.aspx?id=29</a></p>
<p>Vous avez ensuite un appName.exe et un library.zip que vous pouvez distribuer !</p>
<h2 id="6-References-et-code-source"><a href="#6-References-et-code-source" class="headerlink" title="6. Références et code source"></a>6. Références et code source</h2><p>Voici les deux endroits où vous pourrez trouver des informations pour PyQt :</p>
<ul>
<li><a href="http://pyqt.sourceforge.net/Docs/PyQt4/index.html" target="_blank" rel="external">http://pyqt.sourceforge.net/Docs/PyQt4/index.html</a></li>
<li><a href="http://pyqt.sourceforge.net/Docs/PyQt4/classes.html" target="_blank" rel="external">http://pyqt.sourceforge.net/Docs/PyQt4/classes.html</a></li>
</ul>
<p>Après n’hésitez pas à chercher sur Google ;)</p>
<p>Voici les sources du projet présenté dans ce post : <a href="http://blog.nbcorp.fr/wp-content/uploads/2015/07/example-py.zip" target="_blank" rel="external">example-py</a></p>
<p>Voili voilou ! Si vous avez des questions où des remarques, n’hésitez pas à les poster en commentaire !</p>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGÉ DANS</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/PyQt/">PyQt</a> <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/Python/">Python</a> <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/QtDesigner/">QtDesigner</a> <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/Scaffolding/">Scaffolding</a> <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/application/">application</a> <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/maintenable/">maintenable</a> <a class="tag tag--primary tag--small t-link" href="/nbcorp-blog/tags/py2exe/">py2exe</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/nbcorp-blog/2016/12/13/Un-workflow-git-sympa-avec-gitflow/"  data-tooltip="Un workflow git sympa avec gitflow">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PRÉCÉDENT</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/nbcorp-blog/2015/02/15/oha-open-home-automation/" data-tooltip="OHA : Open Home Automation">
                
                    <span class="hide-xs hide-sm text-small icon-mr">SUIVANT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 Titouan BENOIT. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/nbcorp-blog/2016/12/13/Un-workflow-git-sympa-avec-gitflow/"  data-tooltip="Un workflow git sympa avec gitflow">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PRÉCÉDENT</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/nbcorp-blog/2015/02/15/oha-open-home-automation/" data-tooltip="OHA : Open Home Automation">
                
                    <span class="hide-xs hide-sm text-small icon-mr">SUIVANT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-google-plus"></i><span class="">Partager sur Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-facebook-official"></i><span>Partager sur Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/">
                <i class="fa fa-twitter"></i><span>Partager sur Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/0fedc968af6402c6ab176088bb995c91?s=110"/>
        
            <h4 id="about-card-name">Titouan BENOIT</h4>
        
            <h5 id="about-card-bio"><p>Passionné des nouvelles technologies et du web depuis mon plus jeune âge, je souhaite développer des solutions innovantes pour améliorer le quotidien de tous.</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>CTO @ Welp.fr</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                France
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/nbcorp-blog/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/nbcorp-blog/assets/js/script-sm8ygofpbwzoyv49k3emritcdqttdx2iftqewfcoc0phw6wk0sytwjtp3fjx.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://nightbr.github.io/nbcorp-blog/2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/';
                 
                    this.page.identifier = '2015/07/29/developpement-dune-application-desktop-maintenable-en-python-avec-pyqt/';
                                  
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'nbcorp-blog';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



</html>
